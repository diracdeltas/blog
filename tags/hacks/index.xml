<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Hacks on discrete blogarithm</title>
    <link>https://diracdeltas.github.io/blog/tags/hacks/</link>
    <description>Recent content in Hacks on discrete blogarithm</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 05 Jul 2013 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://diracdeltas.github.io/blog/tags/hacks/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Summertime, and the HTTP traffic sniffing is easy</title>
      <link>https://diracdeltas.github.io/blog/summertime-and-the-http-traffic-sniffing-is-easy/</link>
      <pubDate>Fri, 05 Jul 2013 00:00:00 +0000</pubDate>
      
      <guid>https://diracdeltas.github.io/blog/summertime-and-the-http-traffic-sniffing-is-easy/</guid>
      <description>&lt;p&gt;So it happens that every time you access a URL that starts with &amp;#8220;http://&amp;#8221;, anyone on your local network can see what you&amp;#8217;re doing with almost no effort worth writing about. This includes the page itself as well as any information that you&amp;#8217;re transferring, like credit card numbers and passwords (which are hopefully encrypted). It&amp;#8217;s worth reiterating that this isn&amp;#8217;t difficult at all, even if your network is WPA2-protected, as most supposedly-secure WiFi networks are nowadays.&lt;/p&gt;

&lt;p&gt;This sounds like quite a displeasing predicament for those of us who find ourselves using shared wireless networks every day (aka, all of us), but I get the impression that most Internet-users don&amp;#8217;t understand exactly how simple it is to casually sniff HTTP traffic. So, in hopes of convincing you that it *is* in fact simpler than using any OS X package manager successfully, here is the absolute fastest, easiest way I found to reliably eavesdrop on HTTP traffic on most local networks. It should take less than 5 minutes to set up on your Linux thing (maybe also your Mac thing, but I haven&amp;#8217;t tried) and is straightforward to understand.&lt;/p&gt;

&lt;p&gt;(This is intended for education purposes, and also for encouraging more people to use HTTPS instead of HTTP whenever possible, maybe even via the &lt;a href=&#34;https://www.eff.org/https-everywhere/&#34;&gt;browser extension&lt;/a&gt; that I&amp;#8217;m contributing to this summer. More on that in a bit.)&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Run the following to install some packages that we need. dsniff is a collection of various traffic analysis tools, of which we&amp;#8217;ll only use arpspoof; see &lt;a href=&#34;http://www.monkey.org/~dugsong/dsniff/&#34;&gt;here&lt;/a&gt;. tshark is a nice terminal-based packet analyzer; tcpdump also works.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;apt-get install dsniff&lt;/li&gt;
&lt;li&gt;apt-get install tshark&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Turn your machine into ip-forwarding mode as root by flipping a 0 to a 1, or else people on your network won&amp;#8217;t be able to see their websites. Don&amp;#8217;t do this step if you actually want to launch a denial of service attack, I suppose. Also you might want to remember to turn it back to 0 after you&amp;#8217;re done.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;echo &amp;#8220;1&amp;#8221; &amp;gt; /proc/sys/net/ipv4/ip_forward&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Run the following commands as root on a WiFi network. To find your IP address, you can run ifconfig and look for the wlan0__ inet addr. To find your router&amp;#8217;s IP address, you can do something like run &lt;em&gt;traceroute google.com&lt;/em&gt; and pull out the IP address from the first hop, which is likely to be 192.168.x.x.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;arpspoof -i [your IP address] [the router IP address]&lt;/li&gt;
&lt;li&gt;tshark -p port 80 -i wlan0 -T fields -e http.request.method -e http.request.full_uri -e http.user_agent&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;And voila, the second command spews out a stream of HTTP addresses that people on your network are accessing, along with the request method and the type of client software used. This is just the start; you can read the manpage for tshark to figure out how to pull more detailed info from the packets and then start writing scripts to modify them before forwarding them along. Ex: appending &lt;em&gt;-e text&lt;/em&gt; will show HTML data as text from the webpages.&lt;/p&gt;

&lt;p&gt;What we&amp;#8217;ve done so far is:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Perform a attack called &lt;a href=&#34;https://en.wikipedia.org/wiki/ARP_spoofing&#34;&gt;ARP spoofing&lt;/a&gt; on the router. Essentially, we trick everyone on the network into thinking that your computer is the router so that all the traffic intended for the router goes to your computer instead. This is straightforward since ARP doesn&amp;#8217;t include authentication mechanisms.&lt;/li&gt;
&lt;li&gt;Use tshark to extract interesting information from the packets that we&amp;#8217;ve intercepted.&lt;/li&gt;
&lt;li&gt;Forward these packets along to their intended destination so nobody detects our spying.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;While sniffing packets as they floated by on a warm summer night in the attic of a Berkeley farmhouse in the process of testing this out, I could see which HTTP websites my housemates were accessing, what apps they were using on their phones, and what desktop clients they were running without them ever noticing. With a small amount of additional effort and a large amount of additional malice, I could have manipulated their traffic to interchange the titles of Wikipedia articles or whatever else I wanted, the possibilities bounded only by my imagination / knowledge of regular expressions.&lt;/p&gt;

&lt;p&gt;[Note that although WPA2 encrypts data that goes between the router and devices on the network, this clearly doesn&amp;#8217;t prevent eavesdropping via arpspoof by other devices that have access to the network. &lt;a href=&#34;http://security.stackexchange.com/questions/2372/is-wpa2-wifi-protected-against-arp-poisoning-and-sniffing&#34;&gt;Stack Exchange&lt;/a&gt; explains that by operating at a &lt;a href=&#34;https://en.wikipedia.org/wiki/OSI_model&#34;&gt;layer&lt;/a&gt; above that at which WPA encryption occurs, an arpspoof attack causes the data to instead be encrypted for the attacker&amp;#8217;s device instead of the router.]&lt;/p&gt;

&lt;p&gt;Sadface time. On the other hand, none of the above works if you&amp;#8217;re using &lt;a href=&#34;https://en.wikipedia.org/wiki/HTTP_Secure&#34;&gt;HTTPS&lt;/a&gt;, where the S stands for &amp;#8220;secure,&amp;#8221; because in that case traffic is encrypted between you and the server you&amp;#8217;re trying to reach. On the other other hand, outgoing HTTPS requests from your device can still be subtly converted to insecure HTTP via an attack called &lt;a href=&#34;http://www.thoughtcrime.org/software/sslstrip/&#34;&gt;SSLstrip&lt;/a&gt; that makes use of arpspoof if you try to reach an HTTPS site by redirecting from HTTP. On the other other other hand, you can download the EFF&amp;#8217;s &lt;a href=&#34;https://www.eff.org/https-everywhere/&#34;&gt;HTTPS Everywhere extension&lt;/a&gt; for Chrome/Firefox, which rewrites HTTP URLs to HTTPS before you try to connect to the HTTP site. On the (other)*4 hand, there&amp;#8217;s some problems with SSL in practice because of intermediate certificate validation carelessness and so forth. I&amp;#8217;m now out of hands.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>gmailcheck</title>
      <link>https://diracdeltas.github.io/blog/gmailcheck/</link>
      <pubDate>Fri, 24 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://diracdeltas.github.io/blog/gmailcheck/</guid>
      <description>&lt;p&gt;I&amp;#8217;m just not that big a fan of usability, at least not for myself. To be clear, I do care about things being usable, but only enough to delay the eventual onslaught of social alienation. I drink water out of bowls, but only when the apartment is out of cups; I use xmonad as my window manager, but not at potlucks.&lt;/p&gt;

&lt;p&gt;Thus far in my computer-using life, I&amp;#8217;ve never owned a monitor. I don&amp;#8217;t have a smartphone, so everything I do is on a pint-sized Thinkpad X220: writing, coding, ebook reading, garden-variety Internet browsing, photo/audio editing, bike trip navigation, sleeping, etc.&lt;/p&gt;

&lt;p&gt;But recently, I was in the lovely town of Cambridge, MA on a warm spring day, staring out the window of a tired blue house at trees heavy with the impending procreation of innumerable songbirds, feathers washed in ecstatic glow of pollen. Mysterious stirrings of latent desire dripped from the stretched-out sky. Something changed inside me. Suddenly I felt like editing config files.&lt;/p&gt;

&lt;p&gt;So I shut the window and did that for a while, maybe a couple hours or until I started showing symptoms of Vitamin D deficiency, don&amp;#8217;t really remember.&lt;/p&gt;

&lt;p&gt;At the end of this abortive config-puberty, I &lt;a href=&#34;https://github.com/diracdeltas/dotfiles&#34;&gt;threw everything on Github&lt;/a&gt; because typing &amp;#8216;git push&amp;#8217; releases a lot of dopamine in my body and apparently I like that.&lt;/p&gt;

&lt;p&gt;The observant git tree-traveler will notice that there&amp;#8217;s a Python script called gmailcheck in that repo. This is something I&amp;#8217;m glad I wrote, because it solves a real problem without being overly complicated.&lt;/p&gt;

&lt;p&gt;The problem is this: I spend most of my productive work time in the terminal, which is usually the master window in my tiling window setup. I usually also have a browser window open for Google searches. Using gmail, as it turns out, is hella dumb in a window of this size. Furthermore, checking gmail in the browser usually leads to an unending parade of distractions as I start to add events to my calendar, respond to some emails that can wait, click on links that friends have sent, open up &lt;a href=&#34;https://www.noisebridge.net/&#34;&gt;Noisebridge&lt;/a&gt;-discuss threads with titles like &amp;#8220;Who put mercury in the laser cutter? Also, kindergarteners visit TUESDAY,&amp;#8221; etc.&lt;/p&gt;

&lt;p&gt;On the other hand, not checking email at all is not an option, since my phone is usually useless, and anyone who needs to tell me something important is advised to do so over email.&lt;/p&gt;

&lt;p&gt;Essentially, I needed something that would show me whether I had important emails in the terminal. Maybe like Mutt but with the removal of all features that could possibly lead to distractions.&lt;/p&gt;

&lt;p&gt;Seems like a pretty simple Python script, and it was. &lt;a href=&#34;https://github.com/diracdeltas/dotfiles/blob/master/bin/gmailcheck&#34;&gt;Gmailcheck v1.0&lt;/a&gt; will show you basic information about unread emails from the last hour, or whatever time you want to hard-code in for now. I added some extra bells and whistles, like hipster colors and highlighting of emails that gmail auto-labels &amp;#8220;Important.&amp;#8221; If you want to actually respond to an email or do other fancy stuff, you can click on the link and just go to gmail&amp;#8217;s web interface.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.flickr.com/photos/71094651@N06/8744854460/&#34; title=&#34;gmailcheck by diracdeltas, on Flickr&#34;&gt;&lt;img src=&#34;https://farm8.staticflickr.com/7294/8744854460_31b2c29b19.jpg&#34; width=&#34;500&#34; height=&#34;301&#34; alt=&#34;gmailcheck&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Upon reaching this milestone, the next logical thought that occurred to me was, &amp;#8220;How do you properly evoke the spirit of emails on the Noisebridge mailing lists?&amp;#8221;&lt;/p&gt;

&lt;p&gt;The answer is that you print them being said by a huge ASCII-art rendering of &lt;a href=&#34;https://twitter.com/flamsmark&#34;&gt;Tom&lt;/a&gt;, Noisebridge secretary and (before this happened) a friend of mine.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.flickr.com/photos/71094651@N06/8746315257/&#34; title=&#34;gmailcheck trolling by diracdeltas, on Flickr&#34;&gt;&lt;img src=&#34;https://farm8.staticflickr.com/7305/8746315257_4602acb8bf.jpg&#34; width=&#34;500&#34; height=&#34;498&#34; alt=&#34;gmailcheck trolling&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.flickr.com/photos/71094651@N06/8746315225/&#34; title=&#34;cowsay -f tom by diracdeltas, on Flickr&#34;&gt;&lt;img src=&#34;https://farm9.staticflickr.com/8552/8746315225_338f20b7be.jpg&#34; width=&#34;500&#34; height=&#34;492&#34; alt=&#34;cowsay -f tom&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I guess I still don&amp;#8217;t care about usability.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>