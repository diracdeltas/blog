<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
	<meta name="generator" content="Hugo 0.81.0" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      discrete blogarithm &middot; 
    
  </title>

  
  <link rel="stylesheet" href="https://blog.azuki.vip/css/poole.css">
  <link rel="stylesheet" href="https://blog.azuki.vip/css/syntax.css">
  <link rel="stylesheet" href="https://blog.azuki.vip/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.azuki.vip/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://blog.azuki.vip/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.azuki.vip/atom.xml">
</head>


  <body>

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>
      yan&rsquo;s blog
    </p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item  active " href="https://blog.azuki.vip/">Home</a>
    <a class="sidebar-nav-item " href="https://blog.azuki.vip/post">Posts</a>
    <a class="sidebar-nav-item " href="https://blog.azuki.vip/about/">About</a>
      </nav>

  <div class="sidebar-item">
    <p>&copy; 2020. All rights reserved.</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://blog.azuki.vip/" title="Home">discrete blogarithm</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">





<div class="posts">
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/thoughts-on-cypherpunks-2-0/">Thoughts on Cypherpunks 2.0</a></h1>
        <span class="post-date">Oct 13, 2013</span>
        <p>This is a post about fear. It’s easy to write about things that everyone says they are afraid of, but less so about nightmares that you suspect might just be your own. The latter is much more distressing and also easier to push out of the way. I’ll try to elaborate on something that has been in the back of my mind.</p>
<p>Last night, I went to a talk by my friend <a href="https://twitter.com/eqe" target="_blank">Andy</a> titled, “<a href="http://adi.is/s/cpunk20/#1" target="_blank">Cypherpunks 2.0</a>.” Andy thinks that there’s been two major waves of activity in the <a href="http://en.wikipedia.org/wiki/Cypherpunk#Main_principles" target="_blank">cypherpunk</a> movement: the one that peaked in the 90s and put technologies like PGP, SSL, OTR, and Tor in the hands of ordinary people (at least in the U.S.); and the one that started this summer in response to the Snowden leaks.</p>
<p>Andy is hopeful. He points out that Cypherpunks 2.0 has dozens of active crypto and techno-activism mailing lists, as well as IRL meetups like Techno-Activism Third Mondays, CCC, and Cryptoparty. On the technology front, we’re watching projects like Tahoe-LAFS, CryptoCat, Whonix, and Tails become what John Gilmore referred to as the physics and mathematics that guarantees a fair society when legal systems are insufficient (as they typically are).</p>
<p>There was a slide in Andy’s talk that really stuck with everyone in the audience. It read:</p>
<blockquote>
<p>[Cypherpunks 1.0] “Look at this utopia we can build, using cryptography!”</p>
<p>[Cypherpunks 2.0] “Look at this dystopia we have built, using cryptography!”</p>
</blockquote>
<p>And yes, Cypherpunks 2.0 feels less like a revolution for utopia through free cryptography and more like an arms race against Orwellian governments that fundamentally disagree with us on whether privacy is a human right. Cypherpunks today don’t talk about winning, for the most part. We talk about staying above water. We say that the best we can do is to make mass surveillance both illegal and extremely difficult through maximal use of end-to-end encryption. We’re doing the best we can to prevent and protect people from the hells of targeted surveillance if they are ever so unlucky, but it’s hard to make promises when you don’t know if your adversary model is close to realistic.</p>
<p>Last night, I realized that every article I had read about the Snowden leaks either implicitly or explicitly suggested that we should be afraid, because the Orwellian dystopia is already here. Everyone is being watched all the time. Our crypto abilities are decades behind those of the government. Free societies cannot exist in such a state. Etc.</p>
<p>None of the above distresses me, though. Those of us who identify as cypherpunks or simply people who dislike surveillance are in a better spot than before. Every week, we learn a bit more about how government surveillance works, and we adjust our tactics accordingly. Pull, push, merge.</p>
<p>The part that I am truly, deeply, unapologetically terrified of is that we’ll step away from our laptops, take a look at American society as a whole, and find that almost nobody cares.</p>
<p>I’ve had this fear in some form or another for a decade. In 2006, I was 15, rather cynical, and planning to drop out of public school in inner-city Saint Louis. I wanted generational identity instead of Facebook wall posts, protests instead of biweekly third-period Home Economics. There was nothing I despised more than apathy.</p>
<p>That year, I purchased the first book I ever bought for myself. It was <em>Amusing Ourselves to Death</em>, an ever-relevant work of nonfiction written by Neil Postman in 1985. The foreword has a stunningly prophetic passage that, like a boomerang, swings out of the far blue distance and dares us to duck fast:</p>
<blockquote>
<p> . . . we had forgotten that alongside Orwell’s dark vision, there was another- slightly older, slightly less well known, equally chilling: Aldous Huxley’s “Brave New World.” Contrary to common belief even among the educated, Huxley and Orwell did not prophesy the same thing. Orwell warns that we will be overcome by an externally imposed oppression. But in Huxley’s vision, no Big Brother is required to deprive people of their autonomy, maturity and history. As he saw it, people will come to love their oppression, to adore the technologies that undo their capacities to think.</p>
</blockquote>
<p>Postman, in painful detail, considered the possibility that Huxley, not Orwell, was right. Nonetheless, nobody really wants to talk about Huxley. Orwellian surveillance is, in a certain light, a sexy thing to fight against. The apathy of the average person who spends 4 hours per day watching reality TV is not. For most of us, it’s much more fun to hack on Tor than to explain to a grocery store cashier why they should support free software projects that are far less usable than Dropbox.</p>
<p>My fear is that outside of the technological elite, convenience will perpetually win over privacy. I’m afraid that if staying alive in the war against surveillance relies on winning the war against apathy, Cypherpunks 2.0 is moving forward in the wrong direction.</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/memphis-haiku-collection/">Memphis Haiku Collection</a></h1>
        <span class="post-date">Oct 12, 2013</span>
        <p>Tonight I found a collection of stupendously precocious (lolol) poems I wrote on a trip to Memphis at age 13. Here they are, untouched, in all their prematurely cynical glory:</p>
<blockquote>
<p>I’m going to Hell</p>
</blockquote>
<blockquote>
<p>I mean Memphis, in two hours</p>
</blockquote>
<blockquote>
<p>Do not raid my house.</p>
<p>If I don’t return</p>
</blockquote>
<blockquote>
<p>Do not mope like Charlie Brown</p>
</blockquote>
<blockquote>
<p>You’re not in my will.</p>
<p>I gave my pet bird</p>
</blockquote>
<blockquote>
<p>To some short college student</p>
</blockquote>
<blockquote>
<p>With lots of birdseed.</p>
<p>My root beer is flat</p>
</blockquote>
<blockquote>
<p>I must have left it too long</p>
</blockquote>
<blockquote>
<p>Is this relevant?</p>
<p>We are carpooling</p>
</blockquote>
<blockquote>
<p>With some friend of my father’s</p>
</blockquote>
<blockquote>
<p>Hope he pays for gas.</p>
<p>Going to find Elvis</p>
</blockquote>
<blockquote>
<p>Because Lauren told me to</p>
</blockquote>
<blockquote>
<p>Even though he’s dead.</p>
<p>Auditorium</p>
</blockquote>
<blockquote>
<p>The word has five sylables</p>
</blockquote>
<blockquote>
<p>I didn’t spell that right.</p>
<p>The smoky mountains</p>
</blockquote>
<blockquote>
<p>Because only you can stop</p>
</blockquote>
<blockquote>
<p>Those big forest fires.</p>
<p>At Holiday Inn</p>
</blockquote>
<blockquote>
<p>They give you little bottles</p>
</blockquote>
<blockquote>
<p>Of lousy shampoo.</p>
<p>Someone tell Kathy</p>
</blockquote>
<blockquote>
<p>Of the YMCA band</p>
</blockquote>
<blockquote>
<p>I can’t audition.</p>
<p>Chinese food is good</p>
</blockquote>
<blockquote>
<p>Especially the sushi</p>
</blockquote>
<blockquote>
<p>Wait, that’s Japanese.</p>
<p>They had a nurse shark</p>
</blockquote>
<blockquote>
<p>But everyone thought it was a</p>
</blockquote>
<blockquote>
<p>Mutant catfish.</p>
<p>Sushi bars are good</p>
</blockquote>
<blockquote>
<p>And so is the free soy sauce there</p>
</blockquote>
<blockquote>
<p>I spilled a bottle.</p>
<p>Graceland was real big</p>
</blockquote>
<blockquote>
<p>But the tour guides were real dumb</p>
</blockquote>
<blockquote>
<p>That’s why I got lost.</p>
<p>I did meet Elvis</p>
</blockquote>
<blockquote>
<p>He was at his old garden</p>
</blockquote>
<blockquote>
<p>Deep under the ground.</p>
<p>His airplane’s inside</p>
</blockquote>
<blockquote>
<p>Was covered in plastic wrap</p>
</blockquote>
<blockquote>
<p>Must have been itchy.</p>
<p>He had many suits</p>
</blockquote>
<blockquote>
<p>All colors, jeweled and sequined</p>
</blockquote>
<blockquote>
<p>Now worn by dummies.</p>
<p>The gift shop was cool</p>
</blockquote>
<blockquote>
<p>A nice place to be until</p>
</blockquote>
<blockquote>
<p>You saw the price tags.</p>
<p>I bought a milk-shake</p>
</blockquote>
<blockquote>
<p>It had lots of iced vanilla</p>
</blockquote>
<blockquote>
<p>My brain is frozen.</p>
<p>The hotel forgets</p>
</blockquote>
<blockquote>
<p>To give me a bed at night.</p>
</blockquote>
<blockquote>
<p>Now that is stupid.</p>
<p>I’d better go now</p>
</blockquote>
<blockquote>
<p>It’s been great writing these, but</p>
</blockquote>
<blockquote>
<p>The Simpsons is on.</p>
</blockquote>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/tabstash-onetab-for-firefox/">Tabstash: OneTab for Firefox</a></h1>
        <span class="post-date">Oct 2, 2013</span>
        <p>I wrote a Firefox addon one afternoon in France called TabStash. It’s quite simple: you click a button to close all your tabs except the current one. You click it again to open all of them. (Chrome has a popular extension called <a href="http://one-tab.com">OneTab</a> that does this, but at the time there wasn’t a Firefox version.)</p>
<p>A couple nights ago, I finally got around to sending it to the Mozilla addon store. It came out yesterday and already has some downloads, to my surprise.</p>
<p>Anyway, you can find it at <a href="https://addons.mozilla.org/en-US/firefox/addon/tabstash/">https://addons.mozilla.org/en-US/firefox/addon/tabstash/</a>.</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/on-artificially-bounded-futures/">On artificially-bounded futures</a></h1>
        <span class="post-date">Oct 1, 2013</span>
        <p>I flew back to MIT recently for the GNU 30th Anniversary Celebration and Hackathon, thanks to a generous travel scholarship from the Free Software Foundation. All I had to do was never, ever run any proprietary javascript in my browser and something something something about firstborns. Seemed like a net win.</p>
<p>The hackathon itself was fun. I spent most of it teaching people about privacy-enhancing tools like GnuPG and realizing that privacy-enhancing tools are intimidating, even to MIT computer science PhD students. Bad user interfaces are astonishingly powerful, and nothing cripples the human spirit like a poorly-written manpage.</p>
<p>I also gave a short talk to about ~30 undergrads titled, “Things you should be afraid of that you probably didn’t know about.” The alternate title was, “Useful self-preservation tactics in surveillance states.” The alternate alternate title was, “On the possibility of preserving student culture at MIT.” I admit I was trying to get more people to show up on a Friday night.</p>
<p>The problem was that, after an unexpected adventure in NYC the day before followed by an untimely laptop battery failure, I had barely twenty minutes to prep for the talk. So I went for a short run around the Charles River and formulated some thoughts. They went something like:</p>
<ol>
<li>Surveillance is bad. Do MIT undergrads care? Or are they still trying to implement metacircular evaluators in Scheme?</li>
<li>DO NOT LET PEOPLE GIVE INTO CRYPTO-NIHILISM. Show them that we can only fight what we know.</li>
<li>Privacy, if it actually exists, must belong to a community. Privacy that belongs to individuals is necessary but not sufficient.</li>
<li>Ethical choices are painful and often ambiguous. Say you’re the CEO of a company that makes a groundbreaking app that reduces vehicle emissions by 90% in the US. In order to do so, you need to collect data on where everyone’s cars are located at all times. Then one day the government puts you in a <a href="https://en.wikipedia.org/wiki/Qwest">position</a> where your choices are to either (secretly) give them years and years of private user data or let the company shut down (and lose all your money). What do you do?</li>
<li>Imagine if the MIT administration wiretapped all student communications on the Internet and forced every mailing list to contain an administrator. Imagine the student response. Now imagine the same situation at the national scale. This is a useful exercise to brainstorm realistic ways of fighting problems that seem too large and abstract for us to think about at first (ex: mass unchecked government surveillance).</li>
</ol>
<p>To my surprise, the talk went over rather well. People asked lots of excellent questions, like what kind of tinfoil hat to buy. Phew.</p>
<p>Another thing that has come up a lot on this trip is the idea of having a career. As much as I feel uncomfortable about it sometimes, I can’t help but admit that the topic of What To Do In Life has been on my mind lately. The annual MIT Career Fair was a week ago, a bizarre anti-celebratory festival during the first week of classes where hundreds of companies try to recruit students by giving them free Rubix cubes. This year, one courageous sophomore wrote an <a href="http://tech.mit.edu/V133/N39/ogrady.html">opinion article</a> in the school newspaper about how  <span class="userContent">the Career Fair is useless for inspiring faith in the student population’s ability to give a fuck about problems other than making cool-but-also-profitable<span class="text_exposed_show"> technology and making hella cash.</span></span></p>
<p>Obviously this is a thorny issue wrapped in questions of whether the author has properly normalized for her own privilege (she probably has) and if large tech companies like FB/Apple/Google are already doing the maximal amount of good for humanity that they can while remaining profitable (they probably aren’t), BUT it was still surprising that most critical comments essentially said: “Stop looking down on other people / some of us need to make a living / not all corporations are completely evil.” Multiple commenters accused the author of “entitlement”, which seems like a ridiculous term to cast as an insult (aren’t we all entitled to pursuit of happiness?).</p>
<p>Disliking the percentage of commenters who were unfairly bashing on the author, I wrote an uncharacteristically optimistic comment for someone who doesn’t have a consistent job:</p>
<blockquote>
<p>This post was entirely justified and necessary. (Minus the fact that Quizlet probably doesn’t deserve to be on that list, as RJ pointed out.)</p>
<p>A number of the criticizing comments here have argued that companies like Apple and Facebook, on their way to making massive profits, ultimately spawn technologies that do good for the world; furthermore, even MIT students need to support themselves day-to-day regardless of their greater goals. But I think a salient counter-argument is that MIT grads can and absolutely must hold themselves to a higher standard than what these companies represent.</p>
<p>What I am implicitly saying is that (1) there are greater problems that humanity faces than how to get people to trigger certain javascript callbacks that generate ad revenue, and (2) people with the intellect and stamina to lead technological revolutions have a near-moral responsibility to solve these greater problems. The fact is that most MIT graduates can find a job and figure out a way to support themselves in most circumstances, which means they have a rare privilege among young people: the ability to take on great risks and be okay if they fail.</p>
<p>In practice, a dismayingly small percentage of MIT graduates use this privilege for tackling the hardest and most valuable problems of our generation. Climate change is a fine example, given that the lower limit of the time it’ll take for atmospheric methane to collapse the global economy is on the order of <a href="http://www.theguardian.com/environment/2013/jul/24/arctic-thawing-permafrost-climate-change">decades</a>.</p>
<p>Even those of us who work as software engineers and tech CEO’s usually fail to address the question of whether we are making technology for a world where knowledge is free and accessible to everyone, or a world where governments and corporations can freely intrude on the private communications of every single person. Too often, we generate technology that is groundbreaking and astonishing without conscientiously addressing their potential to destroy civil liberties and strip away basic human rights. We can and must exert more pull over the ethical consequences of our innovation.</p>
<p>It is absolutely our moral responsibility to try to make the world we want to live in.</p>
</blockquote>
<p>I really hope I didn’t make all of that up.</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/some-thoughts-on-the-nsa-and-elliptic-curve-cryptography/">Some thoughts on the NSA and elliptic curve cryptography</a></h1>
        <span class="post-date">Sep 13, 2013</span>
        <p>Below is an amalgamation of some posts that I made recently on a popular microblogging platform:</p>
<p>========</p>
<p><span class="userContent">I’ve been reading a lot today about what I believe is a super-likely NSA backdoor into modern cryptosystems.</span></p>
<p>There are these things called elliptic curves that are getting used more and more for key generation in cryptography, especially <span class="text_exposed_show">in forward-secrecy-enabled SSL (which is the EFF-recommended way to secure web traffic). The problem is that the choice of parameters for the elliptic curves most used in practice are set by NIST, and we know for sure that the NSA has some influence on NIST standards.</span></p>
<p>In 2006, NIST published an algorithm for elliptic-curve based random number generation that was shown to be easily breakable but ONLY by whoever chose the elliptic curve parameters. Luckily this algorithm was crazy slow so nobody used it, even though it was the (only?) NIST-recommended way of generating random bits with elliptic curves.</p>
<p>But it turns out there are some <a href="https://eprint.iacr.org/2003/058.pdf">relatively-obscure papers</a> that suggest that you can gain a decent cryptographic advantage by picking the elliptic curve parameters! [Edit: It was later <a href="http://www.scottaaronson.com/blog/?p=1517#comment-87087">pointed out</a> to me that this particular attack is not close to anything <span class="userContent"><span class="text_exposed_show">the NSA could be doing right now, for various reasons. It is of course unclear whether they have knowledge of other elliptic curve parameter-based attacks that are not in the academic literature.]</span></span></p>
<p>This is terrifying, because the elliptic curve parameters chosen for relatively-mysterious reasons by NIST (probably via NSA) are used by Google, OpenSSL, and any RFC-compliant implementation of elliptic curves in OpenPGP (gnupg-ecc, for instance).</p>
<p><span class="userContent"><span class="text_exposed_show">==========</span></span></p>
<p><span class="userContent">Some people might be wondering if they can trust companies who issue statements that their closed-source software products don’t contain NSA backdoors (Microsoft, Google, Apple, etc.). Here is an example of why not.</span></p>
<p>It has been known since <span class="text_exposed_show">2006 that Dual EC DRBG (a NIST-standardized random bit generation algorithm) has a major vulnerability that makes no sense except as an NSA backdoor. Essentially, the algorithm contains some constant parameters that are left unexplained; some researchers then showed that whoever determined these parameters could easily predict the output of the algorithm if they had access to a special set of secret numbers (analogous to an RSA private key). This is a beautiful design for a crytographic backdoor, because the secret numbers are difficult to find except by the person who set the constant parameters in the algorithm.</span></p>
<p>Despite being slower than other random bit generators, Dual EC DRBG is implemented in a bunch of software products by major companies like RSA Security, Microsoft, Cisco, BlackBerry, McAfee, Certicom, and Samsung. For a full list, see: <a href="http://csrc.nist.gov/groups/STM/cavp/documents/drbg/drbgval.html" target="_blank" rel="nofollow nofollow"><a href="http://csrc.nist.gov/groups/STM/cavp/documents/drbg/drbgval.html">http://csrc.nist.gov/groups/STM/cavp/documents/drbg/drbgval.html</a></a></p>
<p>Most of these products are closed-source, so you can’t check whether your encryption keys are being generated with Dual EC DRBG.</p>
<p>This is a pretty strong argument that secure software is necessarily open source software.</p>
<p><span class="userContent"><span class="text_exposed_show">========<br /> </span></span></p>
<p><span class="userContent"><span class="text_exposed_show">Additional citations:</span></span></p>
<p><span data-ft="{&quot;tn&quot;:&quot;K&quot;}" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2]"><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0]"><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[3]">Bruce Schneier on the 2006 backdoor discovery in Dual_EC_DRBG: </span><a href="https://www.schneier.com/blog/archives/2007/11/the_strange_sto.html" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[4]"><a href="https://www.schneier.com/&amp;#8230;/2007/11/the_strange_sto.html">https://www.schneier.com/&amp;#8230;/2007/11/the_strange_sto.html</a></a><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[6]" /><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[7]" /><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[8]">Google’s blog post announcing SSL w/ forward secrecy, specifically mentioning that they use the P-256 curve: </span><a href="https://www.imperialviolet.org/2011/11/22/forwardsecret.html" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[9]"><a href="https://www.imperialviolet.org/2011/11/22/forwardsecret.html">https://www.imperialviolet.org/2011/11/22/forwardsecret.html</a></a><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[10]" /><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[11]" /><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[12]">Wiki section on NIST-recommended curves: </span><a href="https://en.wikipedia.org/wiki/Elliptic_curve_cryptography#NIST-recommended_elliptic_curves" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[13]"><a href="https://en.wikipedia.org/wiki/Elliptic_curve_cryptography&amp;#8230;">https://en.wikipedia.org/wiki/Elliptic_curve_cryptography&amp;#8230;</a></a><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[14]" /><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[15]" /><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[16]">RFC section stating that P-256 is REQUIRED for ecc in openpgp: </span><a href="http://tools.ietf.org/html/rfc6637#section-12.1" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[17]"><a href="http://tools.ietf.org/html/rfc6637#section-12.1">http://tools.ietf.org/html/rfc6637#section-12.1</a></a><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[18]" /><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[19]" /><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[20]">Description of elliptic curve usage in OpenSSL: </span><a href="http://wiki.openssl.org/index.php/Elliptic_Curve_Cryptography" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[21]"><a href="http://wiki.openssl.org/&amp;#8230;/Elliptic_Curve_Cryptography">http://wiki.openssl.org/&amp;#8230;/Elliptic_Curve_Cryptography</a></a><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[22]" /><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[23]" /><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[24]">Presentation on security dangers of NIST curves: </span><a href="http://cr.yp.to/talks/2013.05.31/slides-dan+tanja-20130531-4x3.pdf" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[25]"><a href="http://cr.yp.to/&amp;#8230;/slides-dan+tanja-20130531-4&amp;#215;3.pdf">http://cr.yp.to/&amp;#8230;/slides-dan+tanja-20130531-4&amp;#215;3.pdf</a></a><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[26]" /><br data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[27]" /><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[28]">NSA page recommending you use elliptic curves lol: </span><a href="http://www.nsa.gov/business/programs/elliptic_curve.shtml" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[29]"><a href="http://www.nsa.gov/business/programs/elliptic_curve.shtml">http://www.nsa.gov/business/programs/elliptic_curve.shtml</a></a></span></span></p>
<p><span data-ft="{&quot;tn&quot;:&quot;K&quot;}" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2]"><span data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0]"><a href="http://www.nsa.gov/business/programs/elliptic_curve.shtml" target="_blank" rel="nofollow" data-reactid=".r[3ztcq].[1][4][1]{comment10200823098442317_5008296}.[0].{right}.[0].{left}.[0].[0].[0][2].[0].[29]"> </a></span></span><span class="userContent"><span class="text_exposed_show">========</span></span></p>
<p><span class="userContent"><span class="text_exposed_show">UPDATE (9/23/13): RSA security has issued an advisory to stop using some of their products where DUAL_EC_DRBG is the default random number generator (<a href="http://arstechnica.com/security/2013/09/stop-using-nsa-influence-code-in-our-product-rsa-tells-customers/)">http://arstechnica.com/security/2013/09/stop-using-nsa-influence-code-in-our-product-rsa-tells-customers/)</a>. Matthew Green also made an excellent blog post about this topic over at <a href="http://blog.cryptographyengineering.com/2013/09/the-many-flaws-of-dualecdrbg.html">http://blog.cryptographyengineering.com/2013/09/the-many-flaws-of-dualecdrbg.html</a>.<br /> </span></span></p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/some-favorite-git-commands/">Some favorite git commands</a></h1>
        <span class="post-date">Sep 2, 2013</span>
        <p>Working on HTTPS Everywhere, an open source project with dozens of contributors, has sharpened my git vocabulary immensely. I figured I’d list a few lesser-known commands that I like:</p>
<ul>
<li><em>git log</em> _<em>-pretty=oneline -n<number> –abbrev-commit</em> -G<regex>_: This shows the <number> latest commits in oneline format with shortened commit hashes that added or removed lines matching <regex>. The git pickaxe options (-S, -G) are super useful for searching git commit contents instead of just the commit messages.</li>
<li><em>git checkout <branch> &lt;path/to/file&gt;; git reset; git add -p; git commit</em>: This is almost always less preferable to <em>git cherry-pick</em>, but it is useful when you want only certain hunks of commits to certain files in <branch>. <em>git checkout</em> copies the file from the other branch into the current branch and stages the changes for commit. <em>git reset</em> unstages them so we can select the parts we want to add to our branch on a hunk-by-hunk basis using <em>git add -p</em>. Unfortunately this doesn’t preserve authorship of the changes from <branch>.</li>
<li>git update hooks: We decided that it would be great if the HTTPS Everywhere git server could automatically reject commits that broke the build. It turns out that this is possible using a server-side git update hook, which runs just before updating the refs on the git server. The strategy is to create a temporary copy of the remote with the newly pushed changes, do a test build, and reject the changes if the build fails. See <a href="https://github.com/diracdeltas/https-everywhere/blob/master/hooks/update">here</a> for an example of this in HTTPS Everywhere adapted from a Stack Overflow answer.</li>
</ul>
<p>More to come!</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/https-everywhere-3-3-is-out/">HTTPS Everywhere 3.3 is out!</a></h1>
        <span class="post-date">Jul 27, 2013</span>
        <p>Quick update to mention that a new version of the <a href="https://www.eff.org/https-everywhere">browser extension</a> I’ve been helping with this summer has just been released!</p>
<p>This release was spurred by the impending arrival of Firefox 23, which notably has <a href="https://blog.mozilla.org/tanvi/2013/04/10/mixed-content-blocking-enabled-in-firefox-23/">Mixed Active Content Blocking enabled by default</a>. In summary, this means that scripts loaded via HTTP on an otherwise-HTTPS site will be blocked automatically for security reasons. Although this is good news in general, it would have suddenly caused HTTPS Everywhere to become <a href="https://trac.torproject.org/projects/tor/ticket/9196">way less usable</a>.</p>
<p><a href="https://www.eff.org/about/staff/micah-lee">Micah</a> at the EFF did tons of work on this one to make sure that mixed content rules in HTTPS Everywhere wouldn’t break a massive number of websites for FF23 users, while I implemented the UI to alert users to the fact that they would have to re-input any custom preferences once they updated to 3.3 (unfortunately). I also ended up fixing a previously-undiscovered bug along the way that prevented the HTTPS Everywhere tool-tip from showing up when users install the extension.</p>
<p>It’s kind of sad that the tool-tip didn’t show up for most people before. Did you know that you can disable HTTPS Everywhere rules by clicking on the toolbar icon? This is very handy when certain rules cause a site to break for some reason.</p>
<p>Anyway, happy upgrading!</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/quest-ce-que-le-fuck/">Qu’est-ce que le Fuck?</a></h1>
        <span class="post-date">Jul 20, 2013</span>
        <p>This morning, I found myself running down the middle of an empty highway in rural France at 5 AM. A litany of WTF’s rang through my head.</p>
<p>The sun rose, gently, turning attention to row upon row of freshly-cut crops stretching exorbitantly toward the horizon. Beyond softly rolling hills in the distance, there was the faint quilted pattern of a tiny village, cows and baguettes and all. Except for the thin ribbon of a two-lane highway, it was vague what century this place haunted.</p>
<p>I remember hypothesizing here a month ago, in the car-loathing aftermath of backseating several thousand miles around the US, that I was finally done with travelling for a while. I had just arrived back in San Francisco, unpacked my backpack, fixed my bike, and started interning at the EFF.</p>
<p>A week later, realizing that I could work remotely and that there were better places for human existence than 2 blocks from Market Avenue, I bought a plane ticket for Europe. I had hatched some sort of hazy half-plan to ditch the life I had constructed in SF and backpack around a continent that I had never visited, full of languages I couldn’t speak, until my visa ran out in 3 months’ time. I would carry as little as possible, find like-minded hacker-type people to stay with, and spend most of my time writing code for the EFF, undeterred by distractions like understanding what other people were saying to me. Plus, since I wasn’t paying San Francisco cost-of-living prices and sold my Burning Man ticket, I would probably save money overall. Nothing could go wrong.</p>
<p>After sleeping through the entirety of the flight from SF to Paris while cradling a Kindle that I had intended to use, I unloaded myself into a subway at CDG, got off in the 6-euro-couscous-vendor district, and promptly reached the apartment of a Paris-dwelling ex-housemate who I barely saw the entire time. My impression of Paris from 2 days of aimless wandering is of a city whose historical and cultural significance is completely blighted by the lack of any usable WiFi except at McDonalds. I did not like Paris or find it fit for habitation, needless to say.</p>
<p>Fortunately I was rescued by a group of old friends, who invited me to stay and work with them in (1) a former convent turned into (2) an artist co-op / workspace owned by (3) a man with a pet peacock in (4) a tiny rural town in northern France. Several times a day, I will remember each of these four things in turn and suddenly feel like I’m dreaming.</p>
<p>This is my room:</p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270626797/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm6.staticflickr.com/5332/9270626797_ec92a221c0.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270631001/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm8.staticflickr.com/7295/9270631001_4eebf4b26c.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p>And this is the view:</p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270628773/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm8.staticflickr.com/7436/9270628773_0907da9d50.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270634693/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm4.staticflickr.com/3806/9270634693_94632cf405.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p>The night I arrived, we grilled meat and vegetables in the garden, with wine and baguettes aplenty.</p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9273414054/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm4.staticflickr.com/3728/9273414054_53e7b76aa4.jpg" width="375" height="500" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9273422164/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm8.staticflickr.com/7296/9273422164_b14bc2c398.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p>The peacock made a cameo.</p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270638219/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm4.staticflickr.com/3751/9270638219_983a970393.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p>I took a wander around the convent and basked in its eccentricities.</p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9273425096/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm3.staticflickr.com/2866/9273425096_349aa9455d.jpg" width="375" height="500" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270631819/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm4.staticflickr.com/3797/9270631819_2960edbc27.jpg" width="375" height="500" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270640555/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm4.staticflickr.com/3749/9270640555_3d8c4a8e35.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9273422908/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm8.staticflickr.com/7346/9273422908_aa741eab24.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9270639967/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm8.staticflickr.com/7358/9270639967_de1c9948dd.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p><a href="http://www.flickr.com/photos/71094651@N06/9273412294/" title="PA-F (St. Erme, France) by diracdeltas, on Flickr"><img src="https://farm8.staticflickr.com/7370/9273412294_36b913a1d7.jpg" width="500" height="375" alt="PA-F (St. Erme, France)" /></a></p>
<p>I started settling into a routine after a couple days. It goes something like:</p>
<p>5 AM: Wake up</p>
<p>5:30 AM: Go for a run as the sun rises.</p>
<p>6:30 AM: Breakfast, shower, etc.</p>
<p>7 AM: Start work.</p>
<p>3 PM: Go to bed.</p>
<p>7 PM: Wake up, eat lots of baguette, start work again.</p>
<p>10 PM: Cook and eat dinner with friends.</p>
<p>11 PM: Try to work, mostly end up emailing/IRCing with people in the US who are now awake.</p>
<p>2 AM: Go to bed #2.</p>
<p>This is almost ideal, except that the only grocery store in town is 40 minutes away by foot and closed whenever I’m awake and not work-binging.</p>
<p>I like it here a lot. It’s quiet. There aren’t many people to talk to, since my friends are busy hacking away on a P2P video-sharing project all the time. I get to read a lot. Javascript has become fun – oh wait, maybe I have Stockholm Syndrome.</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/summertime-and-the-http-traffic-sniffing-is-easy/">Summertime, and the HTTP traffic sniffing is easy</a></h1>
        <span class="post-date">Jul 5, 2013</span>
        <p>So it happens that every time you access a URL that starts with “http://”, anyone on your local network can see what you’re doing with almost no effort worth writing about. This includes the page itself as well as any information that you’re transferring, like credit card numbers and passwords (which are hopefully encrypted). It’s worth reiterating that this isn’t difficult at all, even if your network is WPA2-protected, as most supposedly-secure WiFi networks are nowadays.</p>
<p>This sounds like quite a displeasing predicament for those of us who find ourselves using shared wireless networks every day (aka, all of us), but I get the impression that most Internet-users don’t understand exactly how simple it is to casually sniff HTTP traffic. So, in hopes of convincing you that it *is* in fact simpler than using any OS X package manager successfully, here is the absolute fastest, easiest way I found to reliably eavesdrop on HTTP traffic on most local networks. It should take less than 5 minutes to set up on your Linux thing (maybe also your Mac thing, but I haven’t tried) and is straightforward to understand.</p>
<p>(This is intended for education purposes, and also for encouraging more people to use HTTPS instead of HTTP whenever possible, maybe even via the <a href="https://www.eff.org/https-everywhere/">browser extension</a> that I’m contributing to this summer. More on that in a bit.)</p>
<ol>
<li>Run the following to install some packages that we need. dsniff is a collection of various traffic analysis tools, of which we’ll only use arpspoof; see <a href="http://www.monkey.org/~dugsong/dsniff/">here</a>. tshark is a nice terminal-based packet analyzer; tcpdump also works.</li>
</ol>
<ul>
<li>apt-get install dsniff</li>
<li>apt-get install tshark</li>
</ul>
<ol start="2">
<li>Turn your machine into ip-forwarding mode as root by flipping a 0 to a 1, or else people on your network won’t be able to see their websites. Don’t do this step if you actually want to launch a denial of service attack, I suppose. Also you might want to remember to turn it back to 0 after you’re done.</li>
</ol>
<ul>
<li>echo “1” &gt; /proc/sys/net/ipv4/ip_forward</li>
</ul>
<ol start="3">
<li>Run the following commands as root on a WiFi network. To find your IP address, you can run ifconfig and look for the wlan0__ inet addr. To find your router’s IP address, you can do something like run _traceroute google.com_ and pull out the IP address from the first hop, which is likely to be 192.168.x.x.</li>
</ol>
<ul>
<li>arpspoof -i [your IP address] [the router IP address]</li>
<li>tshark -p port 80 -i wlan0 -T fields -e http.request.method -e http.request.full_uri -e http.user_agent</li>
</ul>
<p>And voila, the second command spews out a stream of HTTP addresses that people on your network are accessing, along with the request method and the type of client software used. This is just the start; you can read the manpage for tshark to figure out how to pull more detailed info from the packets and then start writing scripts to modify them before forwarding them along. Ex: appending <em>-e text</em> will show HTML data as text from the webpages.</p>
<p>What we’ve done so far is:</p>
<ol>
<li>Perform a attack called <a href="https://en.wikipedia.org/wiki/ARP_spoofing">ARP spoofing</a> on the router. Essentially, we trick everyone on the network into thinking that your computer is the router so that all the traffic intended for the router goes to your computer instead. This is straightforward since ARP doesn’t include authentication mechanisms.</li>
<li>Use tshark to extract interesting information from the packets that we’ve intercepted.</li>
<li>Forward these packets along to their intended destination so nobody detects our spying.</li>
</ol>
<p>While sniffing packets as they floated by on a warm summer night in the attic of a Berkeley farmhouse in the process of testing this out, I could see which HTTP websites my housemates were accessing, what apps they were using on their phones, and what desktop clients they were running without them ever noticing. With a small amount of additional effort and a large amount of additional malice, I could have manipulated their traffic to interchange the titles of Wikipedia articles or whatever else I wanted, the possibilities bounded only by my imagination / knowledge of regular expressions.</p>
<p>[Note that although WPA2 encrypts data that goes between the router and devices on the network, this clearly doesn’t prevent eavesdropping via arpspoof by other devices that have access to the network. <a href="http://security.stackexchange.com/questions/2372/is-wpa2-wifi-protected-against-arp-poisoning-and-sniffing">Stack Exchange</a> explains that by operating at a <a href="https://en.wikipedia.org/wiki/OSI_model">layer</a> above that at which WPA encryption occurs, an arpspoof attack causes the data to instead be encrypted for the attacker’s device instead of the router.]</p>
<p>Sadface time. On the other hand, none of the above works if you’re using <a href="https://en.wikipedia.org/wiki/HTTP_Secure">HTTPS</a>, where the S stands for “secure,” because in that case traffic is encrypted between you and the server you’re trying to reach. On the other other hand, outgoing HTTPS requests from your device can still be subtly converted to insecure HTTP via an attack called <a href="http://www.thoughtcrime.org/software/sslstrip/">SSLstrip</a> that makes use of arpspoof if you try to reach an HTTPS site by redirecting from HTTP. On the other other other hand, you can download the EFF’s <a href="https://www.eff.org/https-everywhere/">HTTPS Everywhere extension</a> for Chrome/Firefox, which rewrites HTTP URLs to HTTPS before you try to connect to the HTTP site. On the (other)*4 hand, there’s some problems with SSL in practice because of intermediate certificate validation carelessness and so forth. I’m now out of hands.</p>

    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.azuki.vip/some-thoughts-on-facebook-implementing-forward-secrecy/">Some thoughts on Facebook implementing forward secrecy</a></h1>
        <span class="post-date">Jul 4, 2013</span>
        <p>Last month, <a href="http://news.cnet.com/8301-13578_3-57591179-38/data-meet-spies-the-unfinished-state-of-web-crypto/">CNET announced</a> that Facebook is working on implementing a property called <strong>forward secrecy</strong> in its encryption of user data. The article is pretty long, but the gist of it is:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">Forward secrecy</a> is good news, at least theoretically. Right now, when you send data to Facebook’s servers, your data gets encrypted so that someone who intercepts your data can’t read it unless they have Facebook’s secret key. However, if an eavesdropper is recording your messages now and somehow gets the secret key in the future, they can go back and decrypt all your encrypted communications. Forward secrecy in an encryption protocol, by definition, means that <strong>if the secret key is compromised, your communications are still safe from decryption</strong>.</li>
<li>Google is the only major web service that has forward secrecy in its encryption protocol enabled by default. Most services don’t do this because it’s computationally expensive.</li>
<li>The <a href="http://www.guardian.co.uk/world/2013/jun/08/nsa-prism-server-collection-facebook-google">leaked slides</a> about the NSA surveillance program, PRISM, suggest that the NSA is tapping into Internet connections and collecting data in transit between your computer and Facebook’s servers, or at least that this is possible.</li>
<li>Once your data is collected by the NSA, it can probably just sit around forever. That gives plenty of time for Facebook’s secret keys to be brute-forced or obtained by the NSA through a court order. Without perfect secrecy, all your data can be decrypted once this happens.</li>
</ul>
<p>So in other words, Facebook is implementing an extra security measure to protect <strong>data in transit</strong> from users to their servers, and this announcement comes at an opportune time in light of the <a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy">PRISM</a> revelations in early July.</p>
<p>But data in transit isn’t the only kind of data that needs to be protected! What about <strong>data at rest</strong>?</p>
<p>To clarify what I mean here, let’s think about the flow of data from you to your friends when you make a FB post. This is simplified, but it goes something like:</p>
<ol>
<li>You type a message in a text box in your web browser and hit send.</li>
<li>Your browser encrypts that message before it leaves your computer and goes on its way to a Facebook server.</li>
<li>Your message travels over the Internet in encrypted form.</li>
<li>Your message reaches a Facebook server, which decrypts the message and stores it in a database so that it can be retrieved later to be shown on your profile, in your friends’ news feeds, in searches, and so forth.</li>
</ol>
<p>In Steps 3 and 4, your data goes from in transit to at rest. Here’s a handy diagram from <a href="https://en.wikipedia.org/wiki/File:3_states_of_data.jpg">Wikipedia</a> that distinguishes the three states of data, which I’m simplifying into two by merging “data at rest” and “data in use”:</p>
<div style="width: 576px" class="wp-caption alignnone">
  <img alt="" src="https://upload.wikimedia.org/wikipedia/commons/2/23/3_states_of_data.jpg" width="566" height="343" />
  <p class="wp-caption-text">
    Three states of data.
  </p>
</div>
<p>Nowadays, it’s expected for major web services to encrypt all data in transit by default using <a href="https://en.wikipedia.org/wiki/HTTP_Secure">HTTPS</a>, which uses the <strong>SSL/TLS</strong> cryptographic protocols. This is generally done by using a persistent private server key for both <strong>authentication</strong> (verifying the server’s identity) and <strong>encryption</strong> (encoding the data so that only the server can read it). This does not provide forward secrecy, and all encrypted messages are compromised once the persistent server key is found.</p>
<p>Facebook’s announcement, which follows one by Google in 2011, reflects a recent shift toward supporting forward secrecy by generating ephemeral Diffie Hellman keys for encryption during each session. A persistent RSA key is still used to authenticate the server. The ephemeral keys used for encryption, however, are <strong>not stored beyond a session</strong>. Thus, even if the persistent key is compromised, data that has been obtained through eavesdropping on an Internet connection is still safe from decryption.</p>
<p>However, recall that in Step 4 above, Facebook decrypts your data and stores it in a database, presumably one that is password-protected or has some other security measure that lets a trusted set of people access it (database admins, for instance). At this point, your data is just sitting around in decrypted form, protected by whatever-FB-does-to-protect-its-servers. It would be impractical to do otherwise because performing encrypted query operations efficiently is <a href="https://en.wikipedia.org/wiki/Homomorphic_encryption" target="_blank">hard maths</a>, and basically the definition of a web app is something that stores data and performs interesting/useful queries.</p>
<p>With Facebook’s announcement of support for forward secrecy in TLS/SSL, we’ve been assured of increased attention to security for data in transit, but this of course says nothing about data at rest. Indeed, it seems that the NSA surveillance leaks have sparked relatively little discussion of policies at companies like Facebook for securing data at rest. That’s surprising to me, because the oft-spoken phrase “NSA back door” vividly suggests that the NSA is in the trusted set of people who have access to the decrypted data in servers at FB, Google, and so forth.</p>
<p>To be clear, forward secrecy is effective against a particular adversary model, namely wiretapping. Although the CNET article points out that the NSA is probably doing a bunch of wiretapping these days and has agreements with Internet service providers to facilitate such, I assume it’s still easy for the NSA to walk up to someone at Facebook and demand access to the database. In fact, regardless of how secure data is while in transit, it basically always needs to get decrypted on the server side in order to be useful for a web service. As long as it’s easy for the web service to access the decrypted data, it’s easy for the NSA to do so as well*.</p>
<p>*Barring policy changes that would legally prevent surveillance. Even so . . .</p>
<p>In short, there probably exists no NSA-proof cryptographic protocol for securing data at rest so long as companies agree to comply with gov-authorized surveillance programs. Forward secrecy doesn’t seem like much of a deterrent to PRISM in that case.</p>
<p>But in terms of protecting our privacy from attackers who <strong>aren’t</strong> government spying agencies, the security of data at rest matters as much as, if not more than, security for data in transit. Unfortunately, whereas TLS/SSL is an established and widely-used standard for encrypting data in transit (albeit flawed in practice), procedures for securing data at rest seem to vary widely between companies (see Appendix A). These procedures are often described in vague terms if at all. For instance, <a href="https://www.cloze.com/">one service</a> simply states that it “provides multiple layers of security around your information, from access protected data centers, through network and application level security . . . Sensitive information, such as your email, messages and passwords, is always encrypted.” The methods of encryption, whether they are applied in transit or at rest, and other important details related to the security of the service are left out.</p>
<p>It’s hard to blame the product description writers for omitting these crucial details, because most users simply don’t care as long as they feel reasonably secure. It’s easy to feel secure with assurances like the ones quoted above, and news articles about implementations of forward secrecy in the works at FB. And then you get things like <a href="http://thenextweb.com/twitter/2012/12/20/twitter-com-login-flaw-causes-passwords-to-be-sent-in-plain-text-in-some-cases/">Twitter sending passwords in unencrypted form</a> or <a href="https://www.trustwave.com/spiderlabs/advisories/TWSL2011-007.txt">Apple failing to properly authenticate SSL certificates</a> or a whole <a href="http://plaintextoffenders.com/">Tumblr blog of websites that store and send passwords in plaintext</a>, oops. There’s a difference between feeling secure and actually being secure on the web, clearly, but paranoia is tiring and you should probably go check on the 12 Facebook notifications that you got while reading this blog post.</p>
<p>===========</p>
<p><strong>Appendix A: A Brief, Non-Representative Survey of Company Policies for Securing Data at Rest</strong></p>
<p>In the course of researching this blog post, I made a post on a certain social media site asking my friends in tech about how their companies secured non-sensitive data at rest, where non-sensitive data includes user-to-user communications and metadata (but not passwords, SSNs, and financial data). The few answers I got were more sophisticated than, “In plaintext, on a password-protected database,” but I suspect there’s some selection bias here. Anonymized responses below.</p>
<p>_<strong>_</strong>_</p>
<blockquote>
<p>I’ve worked with so many apps, and it’s almost always a database behind a firewall. I’ve occasionally built systems where financial data was stored in some more secure way: one, where financial data and transaction processing happened on a separate box with no services and a very minimal API (to limit exposure), and where it was impossible to retrieve the sensitive information via the API.<br data-reactid=".r[n8ym].[0]{comment10200377727028310_4734438}.[2:0].[5:0:right].[4:1].[5:0:left].[2:1].[2:0].[2:0:2].[3:0].[4:0:1]" /><br data-reactid=".r[n8ym].[0]{comment10200377727028310_4734438}.[2:0].[5:0:right].[4:1].[5:0:left].[2:1].[2:0].[2:0:2].[3:0].[4:0:2]" />The other one actually encrypted data using a key that was secured with the user’s password. It was re-encrypted using the user’s session on login, so the cleartext was only available when the user was logged in, during a request from that specific client. In this way, sensitive information was protected from our staff, and from an attacker, except that anyone who was actively using the system would be exposed (to a reasonably sophisticated attacker).<br data-reactid=".r[n8ym].[0]{comment10200377727028310_4734438}.[2:0].[5:0:right].[4:1].[5:0:left].[2:1].[2:0].[2:0:2].[3:0].[4:0:4]" /><br data-reactid=".r[n8ym].[0]{comment10200377727028310_4734438}.[2:0].[5:0:right].[4:1].[5:0:left].[2:1].[2:0].[2:0:2].[3:0].[4:0:5]" />None of these ideas provide protection from a government, though. Client-side encryption doesn’t really, either. Just look at what happened to Hushmail. I really want there to be some trustable encryption API in the browser, so that client-side encryption for web apps could be a real thing.</p>
</blockquote>
<p>_<strong>_</strong>_</p>
<blockquote>
<p>We actually encrypt (with a separately stored per-user key) all of our user message content. It makes me way way more comfortable debugging problems that come up in production knowing I’m not going to accidentally read a message that was meant for a friend or co-worker. It’s pretty low-effort and low-resource-intensity for us to do this so it seems silly not to.</p>
<p>I guess the tradeoff is that for somebody like Facebook they’d lose the ability to do queries in aggregate to make advertising or similar decisions based on content.</p>
<p>. . . the keys [for encrypting messages] are stored with symmetric encryption. It defends us against outside attackers getting use out of dumps of our database but in theory with access to the layer that gets the messages and has the keys the encryption doesn’t matter. The practical limit when we’ve looked at doing more is one where as long as our site can display your messages then there’s some set of our infrastructure an attacker could use to read those.</p>
</blockquote>
<p>_<strong>_</strong>_</p>
<blockquote>
<p>We use client-side encryption with client-generated keys for user history/bookmarks/passwords, etc. So adding a device to access said data involves JPAKE (key exchange) via our servers (which are treated as an untrusted 3rd party).</p>
<p>This means syncing is hard, but we associate each record with a record ID and sync them if the hash changes.</p>
<p>For telemetry, we use anonymized data – uploads are linked to a UUID that only the client stores locally.</p>
</blockquote>

    </div>
  
</div>

<div class="pagination">
  
  <a class="pagination-item older" href="https://blog.azuki.vip/page/6/">Older</a>
  

  
  <a class="pagination-item newer" href="https://blog.azuki.vip/page/4/">Newer</a>
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    
  </body>
</html>

